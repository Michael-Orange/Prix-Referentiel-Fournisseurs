ğŸ”§ MODIFICATION FORMULAIRE "NOUVEAU PRODUIT"

## AMÃ‰LIORATION Ã€ APPORTER :

Ajouter une section optionnelle dans le formulaire "Nouveau produit" pour saisir directement un premier prix fournisseur.

### STRUCTURE DU FORMULAIRE MODIFIÃ‰ :

**Section 1 : Informations produit** (actuelle, Ã  conserver)
- Nom *
- Description
- CatÃ©gorie *
- Sous-section (conditionnel)
- UnitÃ© de mesure *
- Produit actif (toggle)

**Section 2 : Premier prix fournisseur (NOUVELLE, OPTIONNELLE)**

Ajouter un toggle/checkbox : 
â˜ **"Ajouter un prix fournisseur maintenant"**

Si cochÃ©, afficher les champs suivants :

1. **Fournisseur** (Select, obligatoire si section activÃ©e)
   - Liste dÃ©roulante avec tous les fournisseurs actifs
   - Format : "Nom fournisseur" + badge TVA ("TVA 18%" ou "Sans TVA")
   - Si aucun fournisseur : afficher message "Aucun fournisseur disponible" + bouton "CrÃ©er un fournisseur"

2. **Mode de saisie** (Toggle entre 2 options)
   - Option A : Saisir Prix HT (dÃ©faut)
   - Option B : Saisir Prix TTC

3. **Prix HT (FCFA)** (input nombre, obligatoire si mode A)
   - Placeholder : "Ex: 7000"

4. **Taux TVA (%)** (input nombre, prÃ©-rempli selon fournisseur sÃ©lectionnÃ©, modifiable)
   - PrÃ©-rempli automatiquement : 18% si fournisseur avec TVA, 0% si sans TVA
   - Modifiable manuellement
   - Si modifiÃ© et diffÃ©rent du profil fournisseur â†’ afficher warning : "âš ï¸ TVA diffÃ©rente du profil fournisseur"

5. **Prix TTC (FCFA)** (calculÃ© automatiquement ou saisie si mode B)
   - Si mode A (saisie HT) : champ calculÃ© automatiquement, lecture seule
   - Si mode B (saisie TTC) : champ saisie, HT calculÃ© automatiquement
   - Formules : 
     - TTC = HT Ã— (1 + TVA/100)
     - HT = TTC / (1 + TVA/100)

6. **Date dÃ©but validitÃ©** (Date picker)
   - Valeur par dÃ©faut : aujourd'hui
   - Facultatif

7. **Remarques** (Textarea)
   - Facultatif
   - Placeholder : "Notes sur ce prix..."

### COMPORTEMENT :

**Si toggle "Ajouter un prix fournisseur maintenant" NON COCHÃ‰ :**
- CrÃ©er uniquement le produit (comportement actuel)
- Rediriger vers la liste des produits

**Si toggle "Ajouter un prix fournisseur maintenant" COCHÃ‰ :**
- Valider que le fournisseur est sÃ©lectionnÃ©
- Valider que le prix HT (ou TTC selon mode) est saisi
- Valider la cohÃ©rence HT/TVA/TTC
- CrÃ©er le produit
- CrÃ©er le prix fournisseur associÃ©
- Rediriger vers la fiche dÃ©taillÃ©e du produit OU afficher un message de succÃ¨s : "Produit [NOM] crÃ©Ã© avec succÃ¨s (RÃ©fÃ©rence: FP-XXX). Prix fournisseur [FOURNISSEUR] ajoutÃ© : [PRIX_HT] FCFA HT / [PRIX_TTC] FCFA TTC"

### VALIDATION :

**Champs obligatoires si section activÃ©e :**
- Fournisseur
- Prix HT (si mode HT sÃ©lectionnÃ©) OU Prix TTC (si mode TTC sÃ©lectionnÃ©)
- Taux TVA

**Validation cohÃ©rence :**
- Si TVA = 0% : HT = TTC
- Si TVA = 18% : TTC = HT Ã— 1.18 (tolÃ©rance Â±0.01 FCFA)
- Prix HT et TTC > 0

### MESSAGES D'ERREUR :

- "Veuillez sÃ©lectionner un fournisseur"
- "Le prix HT doit Ãªtre supÃ©rieur Ã  0"
- "Le prix TTC doit Ãªtre supÃ©rieur Ã  0"
- "Le taux de TVA doit Ãªtre entre 0 et 100"
- "Les prix HT, TVA et TTC ne sont pas cohÃ©rents"

### DESIGN :

- Section "Premier prix fournisseur" avec bordure en pointillÃ©s pour indiquer qu'elle est optionnelle
- Toggle bien visible avec libellÃ© clair
- Badge TVA du fournisseur visible dans le select
- Si TVA override : icÃ´ne warning âš ï¸ en orange
- Champs calculÃ©s automatiquement en gris clair (lecture seule)

### EXEMPLE VISUEL ATTENDU :
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Nouveau produit                              â”‚
â”‚ La rÃ©fÃ©rence sera gÃ©nÃ©rÃ©e automatiquement   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Nom *                                        â”‚
â”‚ [PELLE                                    ]  â”‚
â”‚                                              â”‚
â”‚ Description                                  â”‚
â”‚ [Description optionnelle...              ]  â”‚
â”‚                                              â”‚
â”‚ CatÃ©gorie *        Sous-section             â”‚
â”‚ [Outillage-Autresâ–¼] [Outils manuelsâ–¼     ]  â”‚
â”‚                                              â”‚
â”‚ UnitÃ© de mesure *                           â”‚
â”‚ [u â–¼]                                        â”‚
â”‚                                              â”‚
â”‚ Produit actif  [â—â”€â”€â”€â”€]                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â˜‘ Ajouter un prix fournisseur maintenant    â”‚
â”‚                                              â”‚
â”‚ Fournisseur *                               â”‚
â”‚ [ABC MatÃ©riaux [TVA 18%] â–¼]                 â”‚
â”‚                                              â”‚
â”‚ Mode : (â—) Saisir HT  ( ) Saisir TTC        â”‚
â”‚                                              â”‚
â”‚ Prix HT (FCFA) *                            â”‚
â”‚ [7000                                     ]  â”‚
â”‚                                              â”‚
â”‚ Taux TVA (%) *                              â”‚
â”‚ [18.00                                    ]  â”‚
â”‚                                              â”‚
â”‚ Prix TTC (FCFA) (calculÃ©)                   â”‚
â”‚ [8260                                     ]  â”‚
â”‚                                              â”‚
â”‚ Date dÃ©but validitÃ©                         â”‚
â”‚ [04/02/2026 â–¼]                              â”‚
â”‚                                              â”‚
â”‚ Remarques                                    â”‚
â”‚ [Notes sur ce prix...                    ]  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                        [Annuler] [CrÃ©er]    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
âœ… BÃ‰NÃ‰FICES DE CETTE AMÃ‰LIORATION
UX optimisÃ©e : CrÃ©ation produit + prix en une seule action
Moins de clics : Ã‰vite d'aller sur la fiche produit puis "Ajouter un prix"
Facultatif : Si on veut juste crÃ©er le produit sans prix, on peut
CohÃ©rent : MÃªme logique de calcul HT/TTC que dans "Ajouter un prix" sur un produit existant