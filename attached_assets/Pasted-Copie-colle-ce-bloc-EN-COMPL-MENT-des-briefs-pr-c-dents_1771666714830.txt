Copie-colle ce bloc EN COMPL√âMENT des briefs pr√©c√©dents :
# AJOUT : √âDITION AU SIMPLE CLIC SUR LA LIGNE

## OBJECTIF
Simplifier l'√©dition : un clic sur n'importe quelle cellule de la ligne active le mode √©dition (sans cliquer sur ic√¥ne crayon)

## CONTEXTE
Actuellement : il faut cliquer sur l'ic√¥ne crayon pour √©diter
Nouveau comportement : clic direct sur n'importe quelle cellule ‚Üí ligne √©ditable

## MODIFICATIONS DANS client/src/pages/produits.tsx

### 1. Ajouter handler de clic sur ligne

Avant la d√©finition de `columns`, ajouter cette fonction :

```typescript
const handleRowClick = (produit: ProduitWithPrixDefaut, e: React.MouseEvent) => {
  // Ignorer si clic sur bouton d'action (d√©sactiver/r√©activer/voir)
  const target = e.target as HTMLElement;
  if (target.closest('button') || target.closest('[role="button"]')) {
    return;
  }
  
  // Ignorer si d√©j√† en mode √©dition
  if (editingRow === produit.id) {
    return;
  }
  
  // Activer mode √©dition
  startEditing(produit);
};
2. Modifier le rendu du tableau
Localiser le code qui affiche les lignes du tableau (dans le <tbody> ou √©quivalent).
REMPLACER :
{sortedProduits.map((produit) => (
  <tr key={produit.id}>
    {columns.map((col) => (
      <td className={col.className}>
        {col.render(produit)}
      </td>
    ))}
  </tr>
))}
PAR :
{sortedProduits.map((produit) => (
  <tr 
    key={produit.id}
    onClick={(e) => handleRowClick(produit, e)}
    className={`cursor-pointer hover:bg-gray-50 transition-colors ${
      editingRow === produit.id ? 'bg-blue-50' : ''
    }`}
  >
    {columns.map((col) => (
      <td className={col.className}>
        {col.render(produit)}
      </td>
    ))}
  </tr>
))}
3. Retirer l'ic√¥ne crayon (Edit) de la colonne Actions
Dans la d√©finition de la colonne "actions" (derni√®re colonne), SUPPRIMER le bouton Edit/Eye :
RETIRER CE BLOC :
<Button 
  variant="ghost" 
  size="icon" 
  onClick={() => startEditing(p)} 
  data-testid={`button-edit-${p.id}`}
>
  <Eye className="h-4 w-4" />
</Button>
Garder uniquement les boutons de validation (quand en mode √©dition) et d√©sactivation/r√©activation.
4. Retirer les double-clics (devenus inutiles)
Dans TOUTES les colonnes √©ditables, RETIRER les onDoubleClick={() => startEditing(p)} qui sont maintenant inutiles.
Par exemple, dans la colonne "nom" :
RETIRER :
onDoubleClick={() => startEditing(p)}
Idem pour les colonnes :
Stockage
Fournisseur d√©faut
Prix HT
R√©gime fiscal
5. Am√©liorer le feedback visuel
Ajouter style CSS pour indiquer qu'une ligne est cliquable :
Dans le fichier ou en inline, ajouter :
// Optionnel : ajouter tooltip sur ligne
<tr 
  key={produit.id}
  onClick={(e) => handleRowClick(produit, e)}
  className={`cursor-pointer hover:bg-gray-50 transition-colors ${
    editingRow === produit.id ? 'bg-blue-50 ring-2 ring-blue-300' : ''
  }`}
  title="Cliquer pour modifier"  // ‚Üê AJOUTER
>
6. G√©rer le clic sur Select/Input (ne pas fermer l'√©dition)
S'assurer que les clics sur les inputs/selects en mode √©dition ne d√©clenchent pas handleRowClick.
Ajouter e.stopPropagation() sur les inputs/selects si n√©cessaire :
<Input
  value={editForm.nom}
  onChange={(e) => setEditForm({ ...editForm, nom: e.target.value })}
  onClick={(e) => e.stopPropagation()}  // ‚Üê AJOUTER
  className="h-8 text-sm"
  autoFocus
/>

<Select 
  value={editForm.fournisseurId?.toString() || ""} 
  onValueChange={(v) => setEditForm({ ...editForm, fournisseurId: parseInt(v) })}
>
  <SelectTrigger 
    className="h-8 text-sm"
    onClick={(e) => e.stopPropagation()}  // ‚Üê AJOUTER
  >
    <SelectValue placeholder="Choisir..." />
  </SelectTrigger>
  ...
</Select>
Idem pour tous les inputs et selects (Prix HT, R√©gime fiscal, Stockage).
COMPORTEMENT FINAL
Avant modification :
Voir ligne produit
Cliquer sur ic√¥ne crayon
Ligne devient √©ditable
Modifier champs
Valider ou Annuler
Apr√®s modification :
Voir ligne produit
Cliquer n'importe o√π sur la ligne ‚Üê NOUVEAU
Ligne devient √©ditable imm√©diatement
Modifier champs
Valider ou Annuler
Exceptions (ne d√©clenchent PAS l'√©dition) :
Clic sur bouton D√©sactiver/R√©activer
Clic sur bouton Valider/Annuler (en mode √©dition)
Clic dans un input/select d√©j√† en mode √©dition
FEEDBACK VISUEL
√âtat normal :
[Ligne produit] ‚Üê cursor-pointer, hover:bg-gray-50
√âtat hover :
[Ligne produit avec fond gris clair] ‚Üê Indique cliquable
√âtat √©dition active :
[Ligne produit avec fond bleu clair + bordure bleue] ‚Üê Clairement identifiable
TESTS √Ä EFFECTUER
 Clic sur colonne "Produit" ‚Üí ligne √©ditable
 Clic sur colonne "Cat√©gorie" ‚Üí ligne √©ditable
 Clic sur colonne "Prix HT" ‚Üí ligne √©ditable
 Clic sur bouton D√©sactiver ‚Üí ne d√©clenche PAS l'√©dition, d√©sactive le produit
 En mode √©dition : clic dans input ‚Üí ne ferme PAS l'√©dition
 En mode √©dition : clic dans select ‚Üí dropdown s'ouvre normalement
 Ligne en √©dition a fond bleu clair distinct
 Hover sur ligne non √©dit√©e affiche fond gris clair
 Bouton crayon (Eye/Pencil) n'existe plus dans colonne Actions
 Validation/Annulation fonctionnent toujours
AM√âLIORATION OPTIONNELLE : Focus automatique
Pour am√©liorer l'UX, faire focus automatique sur le premier champ √©ditable quand on clique sur la ligne :
Dans la fonction startEditing(), ajouter un setTimeout pour focus :
const startEditing = (produit: ProduitWithPrixDefaut) => {
  setEditingRow(produit.id);
  setEditForm({
    produitId: produit.id,
    nom: produit.nom,
    estStockable: produit.estStockable,
    fournisseurId: produit.fournisseurDefaut?.id || null,
    prixHt: produit.fournisseurDefaut?.prixHt || 0,
    regimeFiscal: produit.fournisseurDefaut?.regimeFiscal || "tva_18",
  });
  
  // Focus automatique sur premier input apr√®s render
  setTimeout(() => {
    const firstInput = document.querySelector(`tr[data-editing-id="${produit.id}"] input`);
    if (firstInput instanceof HTMLInputElement) {
      firstInput.focus();
      firstInput.select();  // S√©lectionne le texte pour remplacement rapide
    }
  }, 50);
};
Et ajouter data-editing-id sur la ligne en √©dition :
<tr 
  key={produit.id}
  data-editing-id={editingRow === produit.id ? produit.id : undefined}
  onClick={(e) => handleRowClick(produit, e)}
  className={...}
>
POINTS D'ATTENTION
‚ö†Ô∏è S'assurer que e.stopPropagation() est bien sur TOUS les inputs/selects
‚ö†Ô∏è Tester sur mobile (touch) : le comportement doit rester fluide
‚ö†Ô∏è Si tu as des liens dans le tableau, ajouter aussi e.stopPropagation() dessus
‚ö†Ô∏è Le fond bleu en mode √©dition doit √™tre suffisamment visible mais pas agressif

---

## ‚úÖ R√âSULTAT ATTENDU

**Avant :**
- 2 √©tapes : Clic crayon ‚Üí √âdition

**Apr√®s :**
- 1 √©tape : Clic ligne ‚Üí √âdition directe üöÄ

**Gain UX :** √âdition **2x plus rapide**, plus intuitive, moins de clics !